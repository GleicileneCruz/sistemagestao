<div th:replace="~{compartilhado/header}"></div>

<div class="container-fluid">
    <div class="card shadow mb-4">
        <div class="col-lg-5 d-none d-lg-block bg-register-image"></div>
        <div class="col-lg-12">
            <div class="p-5">
                <div class="text-center">
                    <h1 class="h4 text-primary mb-4">CADASTRO PRODUTO</h1>
                </div>
                <form class="user" method="POST" action="/products/criar" onsubmit="return confirm('Confirma o cadastro?')">
                    <div class="form-group row">
                        <div class="col-sm-6 mb-3 mb-sm-0">
                            <input type="text" class="form-control" required id="name" name="name"
                                   placeholder="Nome do Produto">
                        </div>
                        <div class="col-sm-6">
                            <select class="form-control" id="category" name="category" required>
                                <option th:each="category : ${categories}" th:value="${category.id}" th:text="${category.name}"></option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-6">
                            <input type="text" class="form-control" required id="quantity" name="quantity" placeholder="Quantidade">
                            <span id="quantity-error" class="text-danger"></span>
                        </div>
                        <div class="col-sm-6">
                            <input type="text" required id="price" name="price" class="form-control"
                                   placeholder="R$ 0.00"/>
                            <span id="price-error" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="form-group row">
                        <div class="col-lg-12 mb-3 mb-sm-0">
                                <textarea class="form-control"
                                          id="description" name="description" placeholder="Descrição"></textarea>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Cadastrar</button>
                    <button type="button" class="btn btn-danger" onclick="window.history.back();">Cancelar</button>
                </form>
                <script>
                    document.getElementById('quantity').addEventListener('input', function() {
                        var value = this.value;
                        if (!/^\d*$/.test(value)) {
                            document.getElementById('quantity-error').innerText = 'A quantidade deve ser um número inteiro.';
                        } else {
                            document.getElementById('quantity-error').innerText = '';
                        }
                    });
                </script>
                <script>
                    document.getElementById('price').addEventListener('input', function() {
                        var value = this.value;
                        if (!/^\d*\.?\d*$/.test(value)) {
                            document.getElementById('price-error').innerText = 'Use o ponto como separador decimal. Ex. R$ 1.00';
                        } else {
                            document.getElementById('price-error').innerText = '';
                        }
                    });
                </script>
            </div>
        </div>
    </div>
</div>

<div th:replace="~{compartilhado/footer}"></div>
